# Benchmark resources organization

## Overview

This folder contains the ODE-FeatureEngine signal processing standardization tests reference values.
Sub-folders are as follow:

+ `sounds` contains the wav files
+ `metadata` contains metadata that describe the wav files
+ `results` contains the features generated by benchmarks.
  + `feature_engine_benchmark` contains the results generated by FeatureEngine-benchmark.
  + `LANGUAGE_VERSION` (eg `python_vanilla`) contains the results generated using a `LANGUAGE`
    and the `VERSION` version of the benchmark. Its content is json files that correspond to
    a run of the benchmark workflow on single wav.

## Files conventions

### Sounds

Wav Files in the `sounds` folder should be encoded as `PCM Little-Endian` and named as follow:

```bash
SOUNDID_WAVBITS_SAMPLENUMBER_SAMPRATE_CHANSNUMBER.wav
```

With:

+ `SOUNDID` - The sound identifier, unique among sounds
+ `WAVBITS` - The number of bits used for sound encoding (`8`, `16` or `24` generally)
+ `SAMPLENUMBER` - The number of samples in the sound file
+ `SAMPRATE` - The sampling rate the sound is using in Hz (usual values are `3900.0` `16000`, `44100`, `96000.0`...)
+ `CHANSNUNMBER` - The number of channels the file contains (`1` for mono, `2` for stereo etc)

### Results

Except for FeatureEngine results, all results are formatted and named as follow.

#### Naming

The results are named:

```bash
SOUNDID_SEGMENTSIZE_WINDOWSIZE_WINDOWOVERLAP_NFFT.json
```

With:

+ `SOUNDID` - The sound used to generate acoustic features
+ `SEGMENTSIZE` - The size of the first level of segmentation for acoustic features computation (in samples)
+ `WINDOWSIZE` - The size of the second level of segmentation for acoustic features computation (in samples)
+ `WINDOWOVERLAP` - The overlap of the second level of segmentation for acoustic features computation (in samples)
+ `NFFT` - The size of the fft-computation window

All these parameters fully describe the generation of the result.

_Note: some parameters, such as the window function used, have been statically set in the benchmark
(eg all benchmarks use the hamming window function)._

#### Format

The results are saved as in a json file that contains one json object per line,
each line corresponds the a time time segment. Json object are formatted as follow:
`{"timestamp": "1970-01-01T00:00:00+00:00", "column_1": values, ..., "column_N": values}`.


#### FeatureEngine-benchmark results

FeatureEngine-benchmark save its results using spark's default json writter
which write results using the same format as the one described above except
that it creates one json file per partition instead of one per file.

The `feature_engine_benchmark` folder will contain sub-folders that
corresponds to a a run of FeatureEngine-benchmark and named as follow:

```bash
DATASETID_SEGMENTSIZE_WINDOWSIZE_WINDOWOVERLAP_NFFT
```

With:

+ `DATASETID` - An identifier of the dataset used to generate the results (eg `example` or `spm500files`)
+ `SEGMENTSIZE` - The size of the first level of segmentation for acoustic features computation (in samples)
+ `WINDOWSIZE` - The size of the second level of segmentation for acoustic features computation (in samples)
+ `WINDOWOVERLAP` - The overlap of the second level of segmentation for acoustic features computation (in samples)
+ `NFFT` - The size of the fft-computation window
